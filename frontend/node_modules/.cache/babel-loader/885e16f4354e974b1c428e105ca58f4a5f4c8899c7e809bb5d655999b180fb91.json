{"ast":null,"code":"import React,{createContext,useContext,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext(null);const CART_KEY='cart';const EMPTY_CART={items:[],totalPrice:0,totalCount:0};export default function CartProvider(_ref){let{children}=_ref;const initCart=getCartFromLocalStorage();const[cartItems,setCartItems]=useState(initCart.items);const[totalPrice,setTotalPrice]=useState(initCart.totalPrice);const[totalCount,setTotalCount]=useState(initCart.totalCount);useEffect(()=>{const totalPrice=sum(cartItems.map(item=>item.price));const totalCount=sum(cartItems.map(item=>item.quantity));setTotalPrice(totalPrice);setTotalCount(totalCount);localStorage.setItem(CART_KEY,JSON.stringify({items:cartItems,totalPrice,totalCount}));},[cartItems]);function getCartFromLocalStorage(){const storedCart=localStorage.getItem(CART_KEY);return storedCart?JSON.parse(storedCart):EMPTY_CART;}const sum=items=>{return items.reduce((prevValue,curValue)=>prevValue+curValue,0);};const removeFromCart=foodId=>{const filteredCartItems=cartItems.filter(item=>item.food.id!==foodId);setCartItems(filteredCartItems);};const changeQuantity=(cartItem,newQuantity)=>{const{food}=cartItem;const changedCartItem={...cartItem,quantity:newQuantity,price:food.price*newQuantity};setCartItems(cartItems.map(item=>item.food.id===food.id?changedCartItem:item));};const addToCart=food=>{const cartItem=cartItems.find(item=>item.food.id===food.id);if(cartItem){changeQuantity(cartItem,cartItem.quantity+1);}else{setCartItems([...cartItems,{food,quantity:1,price:food.price}]);}};const clearCart=()=>{localStorage.removeItem(CART_KEY);const{items,totalPrice,totalCount}=EMPTY_CART;setCartItems(items);setTotalPrice(totalPrice);setTotalCount(totalCount);};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart:{items:cartItems,totalPrice,totalCount},removeFromCart,changeQuantity,addToCart,clearCart},children:children});}export const useCart=()=>useContext(CartContext);","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsx","_jsx","CartContext","CART_KEY","EMPTY_CART","items","totalPrice","totalCount","CartProvider","_ref","children","initCart","getCartFromLocalStorage","cartItems","setCartItems","setTotalPrice","setTotalCount","sum","map","item","price","quantity","localStorage","setItem","JSON","stringify","storedCart","getItem","parse","reduce","prevValue","curValue","removeFromCart","foodId","filteredCartItems","filter","food","id","changeQuantity","cartItem","newQuantity","changedCartItem","addToCart","find","clearCart","removeItem","Provider","value","cart","useCart"],"sources":["C:/Users/Devin Young/Desktop/foodmine-react.js/frontend/src/hooks/useCart.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from 'react'\r\n\r\nconst CartContext = createContext(null);\r\nconst CART_KEY = 'cart';\r\nconst EMPTY_CART = {\r\n    items: [],\r\n    totalPrice: 0,\r\n    totalCount: 0,\r\n}\r\n\r\nexport default function CartProvider({children}) {\r\n    const initCart = getCartFromLocalStorage();\r\n    const [cartItems, setCartItems] = useState(initCart.items);\r\n    const [totalPrice, setTotalPrice] = useState(initCart.totalPrice);\r\n    const [totalCount, setTotalCount] = useState(initCart.totalCount);\r\n\r\n    useEffect(() => {\r\n        const totalPrice = sum(cartItems.map(item => item.price));\r\n        const totalCount = sum(cartItems.map(item => item.quantity));\r\n        setTotalPrice(totalPrice);\r\n        setTotalCount(totalCount);\r\n\r\n        localStorage.setItem(\r\n            CART_KEY,\r\n            JSON.stringify({\r\n                items: cartItems,\r\n                totalPrice,\r\n                totalCount,\r\n            })\r\n        );\r\n\r\n    }, [cartItems]);\r\n\r\n    function getCartFromLocalStorage () {\r\n        const storedCart = localStorage.getItem(CART_KEY);\r\n        return storedCart ? JSON.parse(storedCart) : EMPTY_CART;\r\n    }\r\n\r\n    const sum = items => {\r\n        return items.reduce((prevValue, curValue) => prevValue + curValue, 0)\r\n    }\r\n\r\n    const removeFromCart = foodId => {\r\n        const filteredCartItems = cartItems.filter(item => item.food.id !== foodId);\r\n        setCartItems(filteredCartItems);\r\n    };\r\n\r\n    const changeQuantity = (cartItem, newQuantity) => {\r\n        const { food } = cartItem;\r\n\r\n        const changedCartItem = {\r\n            ...cartItem,\r\n            quantity: newQuantity,\r\n            price: food.price * newQuantity\r\n        };\r\n\r\n        setCartItems(\r\n            cartItems.map(item => (item.food.id === food.id ? changedCartItem : item))\r\n        );\r\n    };\r\n\r\n    const addToCart = food => {\r\n        const cartItem = cartItems.find(item => item.food.id === food.id);\r\n        if (cartItem) {\r\n            changeQuantity(cartItem, cartItem.quantity + 1);\r\n        } else {\r\n            setCartItems([...cartItems, { food, quantity: 1, price: food.price}]);\r\n        }\r\n    };\r\n\r\n    const clearCart = () => {\r\n        localStorage.removeItem(CART_KEY)\r\n        const { items, totalPrice, totalCount } = EMPTY_CART;\r\n        setCartItems(items);\r\n        setTotalPrice(totalPrice);\r\n        setTotalCount(totalCount);\r\n    };\r\n    return (\r\n        <CartContext.Provider value={{cart:{items:cartItems, totalPrice, totalCount }, \r\n        removeFromCart,\r\n        changeQuantity,\r\n        addToCart,\r\n        clearCart,\r\n        }}>\r\n            {children}\r\n        </CartContext.Provider>\r\n    )\r\n}\r\n\r\nexport const useCart = () => useContext(CartContext);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}